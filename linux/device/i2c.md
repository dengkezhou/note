## 一、概述

i2c总线是一种串行、半双工的总线，主要用于近距离、低速的芯片之间的通信。I2c有两根双向的信号线，一根数据线SDA用于收发数据，一根时钟线SCL用于通信双方时钟的同步。

I2C总线是一种多主机总线，连接在I2C总线上的器件分为主机和从机，主机有权发起和结束一次通信，从机只能被动呼叫。当总线上有多个主机同时启用总线时，I2C也具备冲突检测和仲裁的功能防止错误产生。

每个连接到I2C总线上的器件都有一个唯一的地址(7BIT)，由硬件连线决定，且每个器件都可以作为主机或从机。

串行的8位双向数据传输速率在标准模式下可达100Kbit/s，快速模式下可达400Kbit/s，高速模式下可达3.4Mbit/s。

I2C总线中的发送端和接收端不区分主机从机，而是由主机发送的第一个字节的最后一位决定的，第8位为0表示主发从收、为1表示主收从发。发送数据过程中不允许改变发送方向，除非重启一次通信。

i2c总线上传输的数据是广义的，即包括地址，又包含真正的数据。当主机发送第一个字节时，所有的从机都会接收该字节比较高7位与自己的地址，如果相同，则认为自己被主机寻址。

**通信过程：**

1 主机发起起始信号启用总线

2 主机发送一个字节的数据指明从机地址和后续字节的传送方向（高7位为从机地址，）

3 被寻址的从机发送应答信号回应主机

4 发送端发送一个字节数据

5 接收端发送应答信号回应发送端

6 循环步骤4-5

7 通信完成后主机发送停止信号释放总线

**数据信号**

I2C总线进行数据传送时，时钟线SCL为低电平期间，发送器想数据线SDA上发送一位数据；时钟线位高电平期间，SDA上的信号不允许发生变化。

起始信号：SCL为高电平时，SDA由高变低；

终止信号：SCL为高电平时，SDA由低变高；

## 二、linux i2c